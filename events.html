<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Events</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=0.5, maximum-scale=2.0">

        <link rel="apple-touch-icon" sizes="180x180" href="assets/favicon/apple-touch-icon.png">
        <link rel="icon" type="image/png" href="assets/favicon/android-chrome-512x512.png">
        <link rel="manifest" href="assets/favicon/site.webmanifest">

        <!--CSS-->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css" rel="stylesheet"
            integrity="sha384-gH2yIJqKdNHPEq0n4Mqa/HGKIhSkIHeL5AyhkYV8i59U5AR6csBvApHHNl/vI1Bx" crossorigin="anonymous">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
        <link href="css/style.css" rel="stylesheet">
        <!--END-->

        <!--JS-->
        <script src="https://code.jquery.com/jquery-3.6.1.min.js"
            integrity="sha256-o88AwQnZB+VDvE9tvIXrMQaPlFFSUTR+nldQm1LuPXQ="
            crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-A3rJD856KowSb7dwlZdYEkO39Gagi7vIsF0jrRAoQmDKKtQBHUuLZ9AsSv4jD4Xa"
            crossorigin="anonymous"></script>

            <script src="https://cdn.jsdelivr.net/npm/@splidejs/splide@4.0.17/dist/js/splide.min.js"></script>
            <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@splidejs/splide@4.0.17/dist/css/splide.min.css"/>
            <script src="https://cdn.jsdelivr.net/npm/@splidejs/splide-extension-url-hash@0.3.0/dist/js/splide-extension-url-hash.min.js"></script>
    </head>

    <body>
        <div id="loading-loop" class="loading-loop lds-dual-ring" style="display:none;"></div>
        <!--HEADER BAR-->
        <nav class="navbar navbar-custom fixed-top navbar-expand-lg" id="topnav">
            <div class="container-fluid">

                <div class="collapse navbar-collapse" id="navbarSupportedContent">
                    <ul class="navbar-nav mb-2 mb-lg-0" style="margin-right:1.5%;margin-left:auto;">
                        <li class="nav-item">
                            <a class="nav-link" aria-current="page" href="/index.html">Home</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" aria-current="page" href="/aboutus.html">About</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" aria-current="page" href="/ourteam.html">Our Team</a>
                        </li>
                    </ul>
                </div>

                <div class="navbar-brand" href="#">
                    <img src="/assets/CIIED.png" alt="" width="125" height="50" class="d-inline-block align-text-top">
                </div>

                <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
                    data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false"
                    aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <div class="collapse navbar-collapse" id="navbarSupportedContent">
                    <ul class="navbar-nav mb-2 mb-lg-0">
                        <li class="nav-item">
                            <a class="nav-link active" href="/events.html">Events</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="/joinus.html">Join Us</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="https://linktr.ee/ciied" target="_blank">Contact Us</a>
                        </li>
                    </ul>
                </div>
            </div>
        </nav>
        <!--END HEADER BAR-->

        <!-- SLIDESHOW POPUP -->
        <div id="popup" class="popupoverlay" style="display:none;">
            <button onclick="count=0;$('#popup').hide();" class="closer">X</button>
            <img id="mainimg" class="popupimage" src="">
            <button id="prevbut" class="prev"><</button>
            <button id="nextbut" class="next">></button>
        </div>
        <!-- END SLIDESHOW POPUP -->

        <div class="container splide" id="maincontent" style="min-height:90vh;">
            <div class="row">
              <div class="col-lg-12 heading" style="text-align:center;">
                OUR EVENTS
                <hr/>
              </div>
            </div>

            <br>

            <div class="row splide__track">
                <ul class=" splide__list" id="jsonfill">
                </ul>
          </div>
          <div class="splide__progress">
            <div class="splide__progress__bar" style="background-color: black;border-radius:10px;">
            </div>
          </div>
        </div>          
            
          <script>
            var imagearray;
            var count=0;

            // show loader when chaning images
            function nextImg(){
                count++;
                if (count == imagearray.length){
                    count = 0;
                }
                document.getElementById("mainimg").onload = function() {
                    $("#loading-loop").hide();
                } ;
                $("#loading-loop").show();
                $('#mainimg').attr("src", imagearray[count]);
                
            }
            function previousImg(){
                count--;
                if (count == -1){
                    count = imagearray.length-1;
                }
                document.getElementById("mainimg").onload = function() {
                    $("#loading-loop").hide();
                } ;
                $("#loading-loop").show();
                $('#mainimg').attr("src", imagearray[count]);
            }

            $("#nextbut").click(function() {
                nextImg();
            });

            $("#prevbut").click(function() {
                previousImg();
            });

            function launchSlideshow(imagesstring){
                imagearray = imagesstring.split(",");
                $('#popup').show();

                document.getElementById('mainimg').src = imagearray[0];
                return;
            }

            function launchSplide(start){
                

                var splide = new Splide( '.splide', {
                    direction: 'ttb',
                    height   : '70vh',
                    wheel    : true,
                    autoplay: 'play',
                    type: 'loop',
                    gap: '1em',
                    padding: 10,
                    arrows: false,
                    drag: false,
                    start:start,
                    breakpoints: {
                        1000: {
                                arrows: true,
                            },
                        }
                } );
                splide.mount(window.splide.Extensions);
            }

            $.getJSON( "json/events.json", function( data ) {
                var eventslist = data.events;
                var ul = document.getElementById("jsonfill");
                for (i=0; i<eventslist.length; i++){
                    li = document.createElement('li');
                    li.setAttribute('class','splide__slide verticalcarouselback');
                    li.setAttribute('data-splide-hash',eventslist[i].name);

                    div1 = document.createElement('div');
                    div1.setAttribute('class','halfie');
                    div1.innerHTML = "<h2>"+eventslist[i].name+"</h2><hr/>"+eventslist[i].desc;

                    imgs = document.createElement("img");
                    imgs.setAttribute('class','halfie');
                    imgs.src = eventslist[i].coverimage;

                    li.appendChild(div1);
                    li.appendChild(imgs);

                    eventslist[i].otherimages = [eventslist[i].coverimage].concat(eventslist[i].otherimages);

                    if (eventslist[i].otherimages != []){
                        slide = document.createElement("button");
                        slide.innerHTML = "SEE MORE"
                        slide.setAttribute("onclick", "launchSlideshow('"+eventslist[i].otherimages.toString()+"')");
                        div1.append(slide);
                    }

                    ul.appendChild(li);
                }
                hash = decodeURI(window.location.hash.substring(1));
                start = 0;
                for (i=0; i<eventslist.length; i++){
                    if (eventslist[i].name == hash){
                        start = i;
                    }
                }


                launchSplide(start);
            });            
          </script>

        <!--FOOTER-->
        <div class="footerstuff" >
            <div class="row">
                <div class="col-lg heading" style="text-align:center">
                    <a href="https://instagram.com/ciied.bpdc?igshid=YmMyMTA2M2Y=" target="_blank"><i class="fa fa-instagram" aria-hidden="true"></i></a> • <a href="https://www.linkedin.com/company/centre-for-innovation-incubation-and-entrepreneurship/" target="_blank"><i class="fa fa-linkedin" aria-hidden="true"></i></a> • <a href="mailto:ciied@dubai.bits-pilani.ac.in" target="_blank"><i class="fa fa-envelope-o" aria-hidden="true"></i></a>    
                </div>
            </div>
        </div>
        <!--END FOOTER-->
    </body>
    <script src="js/main.js"></script>
    <script>
        function changeMargin(){
            document.getElementById("maincontent").style.marginTop = document.getElementById('topnav').getBoundingClientRect().height+'px';
        }

        new ResizeObserver(changeMargin).observe(document.getElementById("maincontent"));
    </script>
</html>